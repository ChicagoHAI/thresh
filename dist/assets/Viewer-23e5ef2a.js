import{_ as g,h as y,j as u,d as b,a as D,b as p}from"./Interface-7cb44104.js";import{o as i,c as o,a as n,t as f,b as c,d as m,e as h,n as P,g as z,F as L}from"./index-f9a8924c.js";const T={class:"landing-box"},j={class:"container landing-container"},C=n("h4",null,"Annotating with",-1),V={class:"flex justify-center"},O=n("label",{for:"assetsFieldHandle",class:"block cursor-pointer"},[n("div",null,[m(" Drag & drop, or "),n("span",{class:"underline"},"click here"),m(" to add an annotation file ")])],-1),F={key:0,class:"separator"},N=n("span",null,"or",-1),B=[N],H={key:1,class:"option-buttons"},S=["href"],E=n("button",{class:"pa2 ph3 br-pill-ns ba bw1 grow hit-instructions-btn"},"See Tutorial",-1),R=[E],A=n("button",{class:"pa2 ph3 br-pill-ns ba bw1 grow hit-instructions-btn"},"View Example Data",-1),U=[A],Y=["href"],q=n("button",{class:"pa2 ph3 br-pill-ns ba bw1 grow hit-instructions-btn"},"Customize this Template",-1),G=[q],I=["href"],J=n("button",{class:"pa2 ph3 br-pill-ns ba bw1 grow hit-instructions-btn"},"View Paper",-1),K=[J],M={data(){return{filelist:[],config:{}}},props:["consumed_config","set_data","set_config","customize_template_link"],watch:{consumed_config(){this.consume_config()}},methods:{consume_config(){this.consumed_config.hasOwnProperty("consumed_config")?this.config=g.cloneDeep(this.consumed_config.consumed_config):this.consumed_config.hasOwnProperty("config")?this.config=g.cloneDeep(this.consumed_config.config):this.config=g.cloneDeep(this.consumed_config),this.config.template_label&&$("title").text(this.config.template_label)},async onChange(t){var a;let e=await y(t);if(this.config.template_name=="serverless"){let s=(a=e.find(l=>l.hasOwnProperty("_nlproc_tools_template")))==null?void 0:a._nlproc_tools_template;s=u.load(s),this.set_config(s),e=e.filter(l=>!("_nlproc_tools_template"in l))}this.set_data(e)},remove(t){this.filelist.splice(t,1)},dragover(t){t.preDefault(),t.currentTarget.classList.contains("bg-green-300")||(t.currentTarget.classList.remove("bg-gray-100"),t.currentTarget.classList.add("bg-green-300"))},dragleave(t){t.currentTarget.classList.add("bg-gray-100"),t.currentTarget.classList.remove("bg-green-300")},async drop(t){t.preDefault(),await onChange(t),t.currentTarget.classList.add("bg-gray-100"),t.currentTarget.classList.remove("bg-green-300")},get_example_data(){let t;this.customize_template_link.includes("http")?this.config.default_data_link?t=this.config.default_data_link:t="data/demo.json":t=`data/${this.config.template_name}.json`,b(t).then(e=>{this.set_data(e)})}},created(){this.consume_config()},computed:{template_link(){return`/?t=${this.customize_template_link}`}}},Q=Object.assign(M,{__name:"Landing",setup(t){return(e,a)=>(i(),o("main",T,[n("div",j,[C,n("h2",null,f(e.config.template_label),1),n("h3",null,f(e.config.template_description),1),n("div",V,[n("div",{class:"ba b--dashed bw2 file-box",onDragover:a[1]||(a[1]=(...s)=>e.dragover&&e.dragover(...s)),onDragleave:a[2]||(a[2]=(...s)=>e.dragleave&&e.dragleave(...s)),onDrop:a[3]||(a[3]=(...s)=>e.drop&&e.drop(...s))},[n("input",{type:"file",multiple:"",name:"fields[assetsFieldHandle][]",id:"assetsFieldHandle",class:"file-input-field",onChange:a[0]||(a[0]=(...s)=>e.onChange&&e.onChange(...s)),ref:"file",accept:".json"},null,544),O],32)]),e.config.template_name!="serverless"?(i(),o("div",F,B)):c("",!0),e.config.template_name!="serverless"?(i(),o("div",H,[e.config.tutorial_link?(i(),o("a",{key:0,href:e.config.tutorial_link},R,8,S)):c("",!0),n("a",{onClick:a[4]||(a[4]=(...s)=>e.get_example_data&&e.get_example_data(...s))},U),n("a",{href:e.template_link},G,8,Y),e.config.paper_link?(i(),o("a",{key:1,href:e.config.paper_link},K,8,I)):c("",!0)])):c("",!0)])]))}});const W={key:0},X={key:1},Z={data(){return{data:null,consumed_config:null,set_data:this.set_data,set_config:this.set_config,customize_template_link:null,is_fetching:!0}},props:["template_path","serverless"],methods:{set_data(t){this.data=t},set_config(t){this.consumed_config=t}},created:async function(){let t;const e=new URLSearchParams(window.location.search);var a=e.get("i"),s=e.get("gh"),l=e.get("hf");a?(t=a,this.customize_template_link=t):s?(t=`https://raw.githubusercontent.com/${s}`,this.customize_template_link=t):l?(t=`https://huggingface.co/datasets/${l.replace("main","resolve/main")}`,this.customize_template_link=t):(this.customize_template_link=this.template_path,t=`templates/${this.template_path}.yml`),this.serverless&&(t="templates/serverless.yml");let d=await p(t).then(r=>u.load(r));const v=`lang/${d.language||"en"}.yml`;let w=await p(v).then(r=>u.load(r));d.interface_text=Object.assign({},w,d.interface_text),this.set_config(d);var _=e.get("d");if(_){let r=_;s?r=`https://raw.githubusercontent.com/${_}`:l&&(r=`https://huggingface.co/datasets/${_.replace("main","resolve/main")}`),await b(r).then(k=>{this.set_data(k)})}this.is_fetching=!1}},se=Object.assign(Z,{__name:"Viewer",setup(t){return(e,a)=>(i(),o(L,null,[e.consumed_config!=null&&e.consumed_config!=null&&e.data!=null&&e.data!=null&&e.is_fetching==!1?(i(),o("main",W,[h(D,{input_data:{data:e.data},consumed_config:{consumed_config:e.consumed_config}},null,8,["input_data","consumed_config"])])):c("",!0),e.consumed_config!=null&&e.consumed_config!=null&&(e.data==null||e.data==null)&&e.is_fetching==!1?(i(),o("main",X,[h(Q,P(z(e.$data)),null,16)])):c("",!0)],64))}});export{se as default};
